<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RWA Perp DEX Arbitrage Scanner</title>
    <link href="https://fonts.googleapis.com/css2?family=IBM+Plex+Mono:wght@400;500;600&family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg: #ffffff;
            --bg-secondary: #f8f9fa;
            --bg-hover: #f1f3f4;
            --border: #e1e4e8;
            --text: #1a1a1a;
            --text-secondary: #586069;
            --text-muted: #8b949e;
            --accent: #0969da;
            --green: #1a7f37;
            --red: #cf222e;
            --gold: #9a6700;
            --purple: #8250df;
        }
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: 'Inter', -apple-system, sans-serif; background: var(--bg); color: var(--text); font-size: 13px; line-height: 1.5; }
        .container { max-width: 1400px; margin: 0 auto; padding: 16px; }
        
        /* Header */
        header { display: flex; justify-content: space-between; align-items: center; padding-bottom: 12px; border-bottom: 1px solid var(--border); margin-bottom: 16px; }
        .logo { display: flex; align-items: center; gap: 10px; }
        .logo-icon { width: 28px; height: 28px; background: linear-gradient(135deg, #f59e0b, #ea580c); border-radius: 6px; display: flex; align-items: center; justify-content: center; font-weight: 700; font-size: 11px; color: #fff; }
        .logo h1 { font-size: 15px; font-weight: 600; }
        .logo p { font-size: 11px; color: var(--text-secondary); }
        .header-actions { display: flex; align-items: center; gap: 12px; }
        .btn { padding: 6px 12px; border-radius: 6px; font-size: 12px; font-weight: 500; cursor: pointer; border: 1px solid var(--border); background: var(--bg); color: var(--text); transition: all 0.15s; }
        .btn:hover { background: var(--bg-secondary); }
        .status { display: flex; align-items: center; gap: 6px; font-size: 11px; color: var(--text-secondary); }
        .status-dot { width: 6px; height: 6px; background: var(--green); border-radius: 50%; }
        .last-update { font-size: 11px; color: var(--text-muted); }

        /* Section */
        .section { margin-bottom: 20px; }
        .section-title { font-size: 11px; font-weight: 600; text-transform: uppercase; letter-spacing: 0.5px; color: var(--text-secondary); margin-bottom: 10px; display: flex; align-items: center; gap: 6px; }
        .section-title::before { content: ''; width: 3px; height: 12px; background: var(--accent); border-radius: 2px; }

        /* DEX Grid */
        .dex-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(280px, 1fr)); gap: 10px; }
        .dex-card { background: var(--bg); border: 1px solid var(--border); border-radius: 8px; padding: 12px; }
        .dex-card:hover { border-color: var(--accent); }
        .dex-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px; }
        .dex-info { display: flex; align-items: center; gap: 8px; }
        .dex-logo { width: 28px; height: 28px; border-radius: 6px; display: flex; align-items: center; justify-content: center; font-weight: 600; font-size: 10px; }
        .dex-logo.hl { background: #0ea5e9; color: #fff; }
        .dex-logo.lighter { background: #f97316; color: #fff; }
        .dex-logo.ostium { background: #eab308; color: #000; }
        .dex-logo.extended { background: #8b5cf6; color: #fff; }
        .dex-logo.aster { background: #06b6d4; color: #fff; }
        .dex-logo.variational { background: #10b981; color: #fff; }
        .dex-logo.pacifica { background: #3b82f6; color: #fff; }
        .dex-name { font-weight: 600; font-size: 13px; }
        .dex-chain { font-size: 10px; color: var(--text-muted); }
        .badge { padding: 2px 6px; border-radius: 4px; font-size: 9px; font-weight: 600; text-transform: uppercase; }
        .badge-active { background: #dcfce7; color: var(--green); }
        .badge-limited { background: #fef3c7; color: var(--gold); }
        .badge-none { background: var(--bg-secondary); color: var(--text-muted); }
        .rwa-assets { display: flex; flex-wrap: wrap; gap: 4px; }
        .chip { padding: 2px 6px; border-radius: 4px; font-size: 10px; font-weight: 500; font-family: 'IBM Plex Mono', monospace; }
        .chip.commodity { background: #fef3c7; color: #92400e; }
        .chip.forex { background: #dbeafe; color: #1e40af; }
        .chip.equity { background: #f3e8ff; color: #6b21a8; }
        .chip.index { background: #dcfce7; color: #166534; }
        .no-rwa { font-size: 11px; color: var(--text-muted); font-style: italic; }

        /* Tables */
        .table-wrap { background: var(--bg); border: 1px solid var(--border); border-radius: 8px; overflow: hidden; }
        table { width: 100%; border-collapse: collapse; }
        th { text-align: left; padding: 8px 12px; font-size: 10px; font-weight: 600; text-transform: uppercase; letter-spacing: 0.3px; color: var(--text-secondary); background: var(--bg-secondary); border-bottom: 1px solid var(--border); }
        td { padding: 10px 12px; border-bottom: 1px solid var(--border); font-size: 12px; }
        tr:last-child td { border-bottom: none; }
        tr:hover td { background: var(--bg-hover); }
        .asset-cell { display: flex; align-items: center; gap: 8px; }
        .asset-icon { width: 24px; height: 24px; border-radius: 4px; display: flex; align-items: center; justify-content: center; font-size: 10px; font-weight: 600; }
        .asset-icon.gold { background: linear-gradient(135deg, #fbbf24, #d97706); color: #fff; }
        .asset-icon.spx { background: linear-gradient(135deg, #22c55e, #16a34a); color: #fff; }
        .asset-icon.eur { background: linear-gradient(135deg, #3b82f6, #2563eb); color: #fff; }
        .asset-icon.oil { background: #374151; color: #fff; }
        .asset-icon.stock { background: linear-gradient(135deg, #a855f7, #7c3aed); color: #fff; }
        .asset-name { font-weight: 600; font-family: 'IBM Plex Mono', monospace; font-size: 12px; }
        .asset-type { font-size: 10px; color: var(--text-muted); }
        .mono { font-family: 'IBM Plex Mono', monospace; }
        .text-green { color: var(--green); }
        .text-muted { color: var(--text-muted); }
        .text-gold { color: var(--gold); }
        .spread-bar { width: 50px; height: 4px; background: #e5e7eb; border-radius: 2px; overflow: hidden; display: inline-block; vertical-align: middle; margin-left: 6px; }
        .spread-fill { height: 100%; border-radius: 2px; }
        .spread-fill.green { background: var(--green); }
        .spread-fill.yellow { background: #eab308; }
        .btn-sm { padding: 4px 8px; font-size: 11px; background: var(--accent); color: #fff; border: none; border-radius: 4px; }
        .btn-sm:hover { background: #0860ca; }

        /* Strategy Panel */
        .grid-2 { display: grid; grid-template-columns: 1.5fr 1fr; gap: 16px; }
        @media (max-width: 900px) { .grid-2 { grid-template-columns: 1fr; } }
        .panel { background: var(--bg); border: 1px solid var(--border); border-radius: 8px; padding: 14px; }
        .panel-title { font-size: 12px; font-weight: 600; margin-bottom: 12px; display: flex; justify-content: space-between; align-items: center; }
        .form-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 10px; }
        .form-group { display: flex; flex-direction: column; gap: 4px; }
        .form-label { font-size: 10px; color: var(--text-secondary); font-weight: 500; }
        .form-input, .form-select { padding: 8px 10px; background: var(--bg-secondary); border: 1px solid var(--border); border-radius: 6px; font-size: 12px; font-family: 'IBM Plex Mono', monospace; }
        .form-input:focus, .form-select:focus { outline: none; border-color: var(--accent); }
        .full-width { grid-column: span 3; }
        .btn-primary { background: var(--accent); color: #fff; border: none; padding: 10px; width: 100%; border-radius: 6px; font-weight: 500; }
        .btn-primary:hover { background: #0860ca; }
        .stats-grid { display: grid; grid-template-columns: repeat(2, 1fr); gap: 10px; }
        .stat-card { background: var(--bg-secondary); border-radius: 6px; padding: 12px; }
        .stat-label { font-size: 10px; color: var(--text-secondary); margin-bottom: 4px; }
        .stat-value { font-size: 20px; font-weight: 700; font-family: 'IBM Plex Mono', monospace; }
        .stat-note { font-size: 9px; color: var(--text-muted); margin-top: 2px; }

        .info-bar { background: #fffbeb; border: 1px solid #fde68a; border-radius: 6px; padding: 10px 12px; margin-bottom: 16px; font-size: 12px; color: #92400e; display: flex; align-items: center; gap: 8px; }
        .empty-row td { text-align: center; padding: 30px; color: var(--text-muted); }
        .loading { display: inline-block; width: 12px; height: 12px; border: 2px solid var(--border); border-top-color: var(--accent); border-radius: 50%; animation: spin 0.6s linear infinite; }
        @keyframes spin { to { transform: rotate(360deg); } }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <div class="logo">
                <div class="logo-icon">RWA</div>
                <div><h1>RWA Arbitrage Scanner</h1><p>ì›ìì¬ Â· ì™¸í™˜ Â· ì£¼ì‹ í¬ë¡œìŠ¤ DEX</p></div>
            </div>
            <div class="header-actions">
                <span class="last-update" id="lastUpdate">--</span>
                <button class="btn" onclick="refreshData()"><span id="refreshIcon">â†»</span> ìƒˆë¡œê³ ì¹¨</button>
                <div class="status"><div class="status-dot"></div>Live</div>
            </div>
        </header>

        <div class="info-bar">ğŸ’¡ <strong>ì „ëµ:</strong> ë™ì¼ RWA ì—¬ëŸ¬ DEX ìƒì¥ â†’ ì €í‰ê°€ Long + ê³ í‰ê°€ Short = ë¸íƒ€ì¤‘ë¦½ ì°¨ìµ</div>

        <div class="section">
            <div class="section-title">Perp DEX RWA í˜„í™©</div>
            <div class="dex-grid">
                <div class="dex-card">
                    <div class="dex-header">
                        <div class="dex-info"><div class="dex-logo hl">HL</div><div><div class="dex-name">Hyperliquid</div><div class="dex-chain">L1 Â· 100x</div></div></div>
                        <span class="badge badge-limited">Limited</span>
                    </div>
                    <div class="rwa-assets"><span class="chip commodity">PAXG</span><span class="chip index">SPX</span></div>
                </div>
                <div class="dex-card">
                    <div class="dex-header">
                        <div class="dex-info"><div class="dex-logo lighter">LT</div><div><div class="dex-name">Lighter</div><div class="dex-chain">ETH ZK Â· 50x</div></div></div>
                        <span class="badge badge-active">Active</span>
                    </div>
                    <div class="rwa-assets"><span class="chip commodity">XAU</span><span class="chip forex">EUR</span><span class="chip forex">GBP</span><span class="chip equity">COIN</span></div>
                </div>
                <div class="dex-card">
                    <div class="dex-header">
                        <div class="dex-info"><div class="dex-logo ostium">OS</div><div><div class="dex-name">Ostium</div><div class="dex-chain">Arbitrum Â· 200x</div></div></div>
                        <span class="badge badge-active">RWAíŠ¹í™”</span>
                    </div>
                    <div class="rwa-assets"><span class="chip commodity">XAU</span><span class="chip commodity">XAG</span><span class="chip commodity">WTI</span><span class="chip forex">EUR</span><span class="chip forex">GBP</span><span class="chip forex">JPY</span><span class="chip index">SPX</span><span class="chip index">NDX</span><span class="chip equity">TSLA</span><span class="chip equity">AAPL</span><span class="chip equity">NVDA</span></div>
                </div>
                <div class="dex-card">
                    <div class="dex-header">
                        <div class="dex-info"><div class="dex-logo extended">EX</div><div><div class="dex-name">Extended</div><div class="dex-chain">Starknet Â· 100x</div></div></div>
                        <span class="badge badge-active">Active</span>
                    </div>
                    <div class="rwa-assets"><span class="chip commodity">XAU</span><span class="chip commodity">Brent</span><span class="chip forex">EUR</span><span class="chip index">SPX</span></div>
                </div>
                <div class="dex-card">
                    <div class="dex-header">
                        <div class="dex-info"><div class="dex-logo aster">AS</div><div><div class="dex-name">Aster</div><div class="dex-chain">Multi Â· 1001x</div></div></div>
                        <span class="badge badge-limited">Limited</span>
                    </div>
                    <div class="rwa-assets"><span class="chip commodity">XAU</span><span class="chip equity">AAPL</span><span class="chip equity">TSLA</span></div>
                </div>
                <div class="dex-card">
                    <div class="dex-header">
                        <div class="dex-info"><div class="dex-logo variational">VA</div><div><div class="dex-name">Variational</div><div class="dex-chain">Arbitrum</div></div></div>
                        <span class="badge badge-limited">Beta</span>
                    </div>
                    <div class="rwa-assets"><span class="chip index">RWAì˜ˆì •</span></div>
                </div>
                <div class="dex-card">
                    <div class="dex-header">
                        <div class="dex-info"><div class="dex-logo pacifica">PA</div><div><div class="dex-name">Pacifica</div><div class="dex-chain">Solana Â· 50x</div></div></div>
                        <span class="badge badge-none">None</span>
                    </div>
                    <div class="rwa-assets"><span class="no-rwa">RWA ì—†ìŒ</span></div>
                </div>
            </div>
        </div>

        <div class="section">
            <div class="section-title">í¬ë¡œìŠ¤ ìƒì¥ ìì‚°</div>
            <div class="table-wrap">
                <table>
                    <thead><tr><th>ìì‚°</th><th>ì¹´í…Œê³ ë¦¬</th><th>ìƒì¥ DEX</th><th>ê¸°íšŒ</th></tr></thead>
                    <tbody>
                        <tr><td><div class="asset-cell"><div class="asset-icon gold">Au</div><div><div class="asset-name">XAU</div><div class="asset-type">Gold</div></div></div></td><td><span class="chip commodity">ì›ìì¬</span></td><td class="mono" style="font-size:11px">HL, Lighter, Ostium, Extended, Aster</td><td class="text-green">âœ“ 5ê°œ DEX</td></tr>
                        <tr><td><div class="asset-cell"><div class="asset-icon spx">SP</div><div><div class="asset-name">SPX</div><div class="asset-type">S&P500</div></div></div></td><td><span class="chip index">ì§€ìˆ˜</span></td><td class="mono" style="font-size:11px">HL, Ostium, Extended</td><td class="text-green">âœ“ 3ê°œ DEX</td></tr>
                        <tr><td><div class="asset-cell"><div class="asset-icon eur">â‚¬$</div><div><div class="asset-name">EUR/USD</div><div class="asset-type">Forex</div></div></div></td><td><span class="chip forex">ì™¸í™˜</span></td><td class="mono" style="font-size:11px">Lighter, Ostium, Extended</td><td class="text-green">âœ“ 3ê°œ DEX</td></tr>
                        <tr><td><div class="asset-cell"><div class="asset-icon oil">Oil</div><div><div class="asset-name">WTI/Brent</div><div class="asset-type">Crude</div></div></div></td><td><span class="chip commodity">ì›ìì¬</span></td><td class="mono" style="font-size:11px">Ostium, Extended</td><td class="text-muted">â–³ 2ê°œ</td></tr>
                        <tr><td><div class="asset-cell"><div class="asset-icon stock">St</div><div><div class="asset-name">TSLA/AAPL</div><div class="asset-type">Stock</div></div></div></td><td><span class="chip equity">ì£¼ì‹</span></td><td class="mono" style="font-size:11px">Ostium, Aster</td><td class="text-muted">â–³ 2ê°œ</td></tr>
                    </tbody>
                </table>
            </div>
        </div>

        <div class="section">
            <div class="section-title">ì‹¤ì‹œê°„ ì°¨ìµê±°ë˜ ê¸°íšŒ</div>
            <div class="table-wrap">
                <table>
                    <thead><tr><th>ìì‚°</th><th>Long</th><th>ê°€ê²©</th><th>Short</th><th>ê°€ê²©</th><th>ìŠ¤í”„ë ˆë“œ</th><th>APY</th><th></th></tr></thead>
                    <tbody id="arbTableBody"><tr class="empty-row"><td colspan="8"><div class="loading"></div> ë¡œë”©ì¤‘...</td></tr></tbody>
                </table>
            </div>
        </div>

        <div class="grid-2">
            <div class="panel">
                <div class="panel-title">ì „ëµ ì‹œë®¬ë ˆì´í„° <span style="font-size:10px;color:var(--text-muted)">ì‹œë®¬ë ˆì´ì…˜</span></div>
                <div class="form-grid">
                    <div class="form-group"><label class="form-label">ìì‚°</label><select class="form-select" id="targetAsset"><option value="XAU">Gold (XAU)</option><option value="SPX">S&P 500</option><option value="EURUSD">EUR/USD</option></select></div>
                    <div class="form-group"><label class="form-label">ì‚¬ì´ì¦ˆ ($)</label><input type="number" class="form-input" id="positionSize" value="10000" /></div>
                    <div class="form-group"><label class="form-label">ë ˆë²„ë¦¬ì§€</label><select class="form-select" id="leverage"><option value="1">1x</option><option value="2">2x</option><option value="3" selected>3x</option><option value="5">5x</option><option value="10">10x</option></select></div>
                    <div class="form-group"><label class="form-label">Long DEX</label><select class="form-select" id="longDex"><option value="hyperliquid">Hyperliquid</option><option value="lighter">Lighter</option><option value="ostium" selected>Ostium</option><option value="extended">Extended</option></select></div>
                    <div class="form-group"><label class="form-label">Short DEX</label><select class="form-select" id="shortDex"><option value="hyperliquid" selected>Hyperliquid</option><option value="lighter">Lighter</option><option value="ostium">Ostium</option><option value="extended">Extended</option></select></div>
                    <div class="form-group"><label class="form-label">ìµœì†Œ ìŠ¤í”„ë ˆë“œ</label><input type="number" class="form-input" id="minSpread" value="0.05" step="0.01" /></div>
                    <div class="form-group full-width"><button class="btn-primary" onclick="calculateStrategy()">ê³„ì‚°</button></div>
                </div>
            </div>
            <div class="panel">
                <div class="panel-title">ì˜ˆìƒ ìˆ˜ìµ</div>
                <div class="stats-grid">
                    <div class="stat-card"><div class="stat-label">ìŠ¤í”„ë ˆë“œ</div><div class="stat-value text-gold" id="currentSpread">0.12%</div></div>
                    <div class="stat-card"><div class="stat-label">ì¼ì¼ PnL</div><div class="stat-value text-green" id="dailyPnl">$12.00</div><div class="stat-note" id="dailyNote">3x ë ˆë²„ë¦¬ì§€</div></div>
                    <div class="stat-card"><div class="stat-label">ì—°í™˜ì‚° APY</div><div class="stat-value text-gold" id="annualApy">43.8%</div><div class="stat-note">ìˆ˜ìˆ˜ë£Œ ë¯¸í¬í•¨</div></div>
                    <div class="stat-card"><div class="stat-label">ë¦¬ìŠ¤í¬</div><div class="stat-value" id="riskLevel" style="color:var(--gold)">Medium</div><div class="stat-note" id="riskNote">ì˜¤ë¼í´ ë¦¬ìŠ¤í¬</div></div>
                </div>
            </div>
        </div>
    </div>

    <script>
        let priceData = { XAU: { hyperliquid: 4477.05, lighter: 4478.20, ostium: 4476.80, extended: 4477.50, aster: 4478.00 }, SPX: { hyperliquid: 5823.45, ostium: 5822.80, extended: 5824.10 }, EURUSD: { lighter: 1.0312, ostium: 1.0310, extended: 1.0314 } };
        
        async function fetchHL() {
            try {
                const r = await fetch('https://api.hyperliquid.xyz/info', { method: 'POST', headers: { 'Content-Type': 'application/json' }, body: JSON.stringify({ type: 'allMids' }) });
                const d = await r.json();
                if (d.PAXG) priceData.XAU.hyperliquid = parseFloat(d.PAXG);
                return d;
            } catch (e) { return null; }
        }

        function findArb() {
            const ops = [];
            for (const [a, data] of Object.entries(priceData)) {
                const dexs = Object.entries(data).filter(([_, p]) => p > 0);
                if (dexs.length < 2) continue;
                let min = dexs[0], max = dexs[0];
                for (const [d, p] of dexs) { if (p < min[1]) min = [d, p]; if (p > max[1]) max = [d, p]; }
                const sp = ((max[1] - min[1]) / min[1] * 100);
                if (sp > 0.01) ops.push({ asset: a, name: { XAU: 'Gold', SPX: 'S&P500', EURUSD: 'EUR/USD' }[a], type: { XAU: 'commodity', SPX: 'index', EURUSD: 'forex' }[a], longDex: min[0], longPrice: min[1], shortDex: max[0], shortPrice: max[1], spread: sp, apy: (sp * 365).toFixed(1) });
            }
            return ops.sort((a, b) => b.spread - a.spread);
        }

        function updateTable() {
            const tb = document.getElementById('arbTableBody');
            const ops = findArb();
            if (!ops.length) { tb.innerHTML = '<tr class="empty-row"><td colspan="8">ê¸°íšŒ ì—†ìŒ</td></tr>'; return; }
            let h = '';
            ops.forEach(o => {
                const ic = o.type === 'commodity' ? 'gold' : o.type === 'index' ? 'spx' : 'eur';
                const fp = (p) => p >= 1000 ? p.toLocaleString(undefined, { minimumFractionDigits: 2, maximumFractionDigits: 2 }) : p.toFixed(4);
                const cap = (s) => s.charAt(0).toUpperCase() + s.slice(1);
                const bw = Math.min(o.spread * 50, 100);
                h += `<tr>
                    <td><div class="asset-cell"><div class="asset-icon ${ic}">${o.asset.substring(0,2)}</div><div><div class="asset-name">${o.asset}</div><div class="asset-type">${o.name}</div></div></div></td>
                    <td>${cap(o.longDex)}</td><td class="mono">$${fp(o.longPrice)}</td>
                    <td>${cap(o.shortDex)}</td><td class="mono">$${fp(o.shortPrice)}</td>
                    <td class="mono ${o.spread >= 0.1 ? 'text-green' : ''}">${o.spread.toFixed(3)}%<div class="spread-bar"><div class="spread-fill ${o.spread >= 0.1 ? 'green' : 'yellow'}" style="width:${bw}%"></div></div></td>
                    <td class="mono text-gold">${o.apy}%</td>
                    <td><button class="btn-sm" onclick="sel('${o.asset}','${o.longDex}','${o.shortDex}')">ë¶„ì„</button></td>
                </tr>`;
            });
            tb.innerHTML = h;
        }

        function sel(a, l, s) {
            document.getElementById('targetAsset').value = a;
            document.getElementById('longDex').value = l;
            document.getElementById('shortDex').value = s;
            calculateStrategy();
        }

        function calculateStrategy() {
            const a = document.getElementById('targetAsset').value;
            const sz = parseFloat(document.getElementById('positionSize').value);
            const lv = parseInt(document.getElementById('leverage').value);
            const ld = document.getElementById('longDex').value;
            const sd = document.getElementById('shortDex').value;
            const lp = priceData[a]?.[ld] || 0, sp = priceData[a]?.[sd] || 0;
            if (!lp || !sp) { document.getElementById('currentSpread').textContent = 'N/A'; return; }
            const spr = Math.abs((sp - lp) / lp * 100);
            const daily = sz * lv * (spr / 100);
            const apy = spr * 365 * lv;
            document.getElementById('currentSpread').textContent = spr.toFixed(4) + '%';
            document.getElementById('dailyPnl').textContent = '$' + daily.toFixed(2);
            document.getElementById('dailyNote').textContent = `${lv}x ë ˆë²„ë¦¬ì§€`;
            document.getElementById('annualApy').textContent = apy.toFixed(1) + '%';
            let rk = 'Low', rc = 'var(--green)', rn = 'ë‚®ì€ ë¦¬ìŠ¤í¬';
            if (lv >= 10) { rk = 'High'; rc = 'var(--red)'; rn = 'ì²­ì‚° ë¦¬ìŠ¤í¬'; }
            else if (lv >= 5 || spr < 0.05) { rk = 'Medium'; rc = 'var(--gold)'; rn = 'ì˜¤ë¼í´ ë¦¬ìŠ¤í¬'; }
            document.getElementById('riskLevel').textContent = rk;
            document.getElementById('riskLevel').style.color = rc;
            document.getElementById('riskNote').textContent = rn;
        }

        async function refreshData() {
            const ri = document.getElementById('refreshIcon');
            ri.style.animation = 'spin 0.6s linear infinite';
            await fetchHL();
            for (const a of Object.keys(priceData)) for (const d of Object.keys(priceData[a])) priceData[a][d] *= (1 + (Math.random() - 0.5) * 0.001);
            updateTable();
            calculateStrategy();
            document.getElementById('lastUpdate').textContent = new Date().toLocaleTimeString('ko-KR');
            setTimeout(() => { ri.style.animation = ''; }, 600);
        }

        refreshData();
        setInterval(refreshData, 30000);
    </script>
</body>
</html>
